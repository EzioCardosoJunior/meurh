<p-table [value]="registroEmprego || []" responsiveLayout="scroll">
    <p-toast></p-toast>
    <ng-template pTemplate="header">
        <tr>
            <th>Empresa</th>
            <th>Função</th>
            <th>Período</th>
            <th>Atual</th>
            <th>Atividades</th>
            <th style="width: 8rem"></th>
        </tr>
    </ng-template>

    <ng-template pTemplate="body" let-item>
        <tr>
            <td>{{ item.dados.empresa }}</td>
            <td>{{ item.dados.funcao }}</td>
            <td>
                {{ item.dados.data_entrada | date:'dd/MM/yyyy' }} -
                {{ item.dados.atual ? 'Atual' : (item.dados.data_termino | date:'dd/MM/yyyy') }}
            </td>
            <td>{{ item.dados.atual ? 'Sim' : 'Não' }}</td>
            <td [innerHTML]="item.dados.atividades"></td>
            <td class="text-center">
                <button pButton pRipple icon="pi pi-trash" class="p-button-danger p-button-text p-button-rounded"
                    (click)="confirmDelete(item.dados.id)">
                </button>
            </td>
        </tr>
    </ng-template>

</p-table>


<div class="card">
    <p-toast></p-toast>

    <span class="block text-900 font-bold text-xl mb-4">Último Emprego</span>

    <form [formGroup]="empregoForm" class="grid grid-nogutter flex-wrap gap-3 p-fluid">

        <div class="col-12">
            <div class="grid formgrid">

                <!-- EMPRESA -->
                <div class="col-12 field">
                    <label class="font-semibold block mb-2">Empresa</label>
                    <input pInputText type="text" placeholder="Empresa" formControlName="empresa" />
                </div>

                <!-- FUNÇÃO -->
                <div class="col-12 field">
                    <label class="font-semibold block mb-2">Último cargo ou função</label>
                    <input pInputText type="text" placeholder="Cargo / Função" formControlName="funcao" />
                </div>

                <!-- DATA ENTRADA -->
                <div class="col-12 lg:col-4 field">
                    <label class="font-semibold block mb-2">Data de entrada</label>
                    <input pInputText type="date" formControlName="data_entrada" />
                </div>

                <!-- DATA TÉRMINO -->
                <div class="col-12 lg:col-4 field">
                    <label class="font-semibold block mb-2">Data de término</label>
                    <input pInputText type="date" formControlName="data_termino" />
                </div>

                <!-- EMPREGO ATUAL -->
                <div
                    class="col-12 lg:col-4 field border-1 surface-border flex justify-content-between align-items-center py-2 px-3 border-round">

                    <span class="text-900 font-bold">Emprego atual</span>

                    <p-inputSwitch formControlName="atual">
                    </p-inputSwitch>

                </div>

            </div>
        </div>

        <!-- EDITOR -->
        <span class="block text-900 font-bold text-xl mb-4 mt-4">
            Funções e atividades realizadas
        </span>

        <div class="col-12">
            <div class="grid formgrid">
                <div class="col-12 field">
                    <p-editor formControlName="atividades" [style]="{ height: '250px' }">
                    </p-editor>
                </div>
            </div>
        </div>

        <!-- BOTÕES -->
        <div class="col-12 flex flex-column sm:flex-row justify-content-between align-items-center gap-3 py-2">

            <button pButton class="p-button-danger flex-1 p-button-outlined" label="Limpar" icon="pi pi-trash"
                (click)="limpar()">
            </button>

            <button pButton class="p-button-primary flex-1" label="Salvar" icon="pi pi-check" (click)="salvar()">
            </button>

            <button *ngIf="empregoForm.get('id')" pButton class="p-button-danger flex-1" label="Excluir registro"
                icon="pi pi-trash" (click)="excluir()">
            </button>

            <button *ngIf="!empregoForm.disabled" pButton class="p-button-primary flex-1" label="Salvar"
                icon="pi pi-check" (click)="salvar()">
            </button>



        </div>

    </form>
</div>